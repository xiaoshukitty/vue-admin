"use strict";(self.webpackChunkvue_test=self.webpackChunkvue_test||[]).push([[9745],{69745:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var a=i(1026);const s=[{id:0,weather:"晴"},{id:1,weather:"多云"},{id:2,weather:"阴"},{id:3,weather:"阵雨"},{id:4,weather:"雷阵雨"},{id:5,weather:"雷阵雨伴有冰雹"},{id:6,weather:"雨夹雪"},{id:7,weather:"小雨"},{id:8,weather:"中雨"},{id:9,weather:"大雨"},{id:10,weather:"暴雨"},{id:11,weather:"大暴雨"},{id:12,weather:"特大暴雨"},{id:13,weather:"阵雪"},{id:14,weather:"小雪"},{id:15,weather:"中雪"},{id:16,weather:"大雪"},{id:17,weather:"暴雪"},{id:18,weather:"雾"},{id:19,weather:"冻雨"}];var r=i(42325),l={props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:""},updataInfoVisible:{type:Object,default:()=>{}},visibleType:{type:String,default:""}},name:"BasePopUp",data(){return{form:{date:"",content:""},weatherList:s,ind:"-1",loading:!1,loadingText:"",pageMistake:null}},watch:{updataInfoVisible(t){if(this.isTrueFalse(),!(0,r.FR)(t))return this.loading=!0,this.init(),void setTimeout((()=>{this.pageMistake=(0,r.FR)(t)}),3e3);const{create_date:e,weather:i,content:a,id:l}=t;this.form={date:new Date(e),content:a,id:l},this.ind=s.find((t=>t.weather==i)).id},visibleType(t){"add"==t&&this.init()}},computed:{dialogOrder:{get(){return this.dialogVisible},set(t){this.$emit("update:visible",t)}},isShow(){return"add"==this.visibleType}},methods:{init(){this.form={date:"",content:""},this.ind="-1","add"==this.visibleType&&this.isTrueFalse()},operationUserInfo(){this.isShow?this.addMemorandumInfo():this.updateMemoInfo()},async addMemorandumInfo(){let t={create_date:(0,r.zi)(this.form.date,1),weather:this.weatherList[Number(this.ind)].weather,content:this.form.content};await(0,a.Wc)(t);try{this.$message.success("添加备忘录信息成功"),setTimeout((()=>{this.$emit("update:visible",!1),this.init()}),500)}catch{throw new Error("No Data")}},async updateMemoInfo(){let t={create_date:(0,r.zi)(this.form.date,1),weather:this.weatherList[Number(this.ind)].weather,content:this.form.content,id:this.form.id};await(0,a.ns)(t);try{this.$message.success("甜心用户数据成功"),setTimeout((()=>{this.$emit("update:visible",!1)}),500)}catch{throw new Error("No Data")}},selectItem({id:t}){this.ind=t},isTrueFalse(){this.pageMistake=!0,this.loading=!1}}},n=i(43736),o={name:"RequestText",data(){return{memorandumList:[],form:{create_date:""},dialogVisible:!1,title:"",updataInfoVisible:{},visibleType:"",loading:!1,currentPage:1}},components:{BasePopUp:(0,n.Z)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.title,visible:t.dialogOrder,width:"30%","append-to-body":!0,"close-on-click-modal":!0},on:{"update:visible":function(e){t.dialogOrder=e}}},[t.pageMistake?i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pop_up",attrs:{"element-loading-text":t.loadingText}},[i("div",{staticClass:"container"},[i("div",{staticClass:"w80"},[t._v("请输入时间")]),i("div",[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)]),i("div",{staticClass:"container"},[i("div",{staticClass:"w80"},[t._v("请选择当前天气")]),i("div",{staticStyle:{flex:"1"}},[i("div",{staticClass:"list"},t._l(t.weatherList,(function(e,a){return i("div",{key:a,class:["item",e.id==t.ind?"selectItem":""],on:{click:function(i){return t.selectItem(e)}}},[t._v(" "+t._s(e.weather)+" ")])})),0)])]),i("div",{staticClass:"container"},[i("div",{staticClass:"w80"},[t._v("请输入当前内容")]),i("div",{staticStyle:{flex:"1"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入当前内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)]),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.operationUserInfo}},[t._v(t._s(t.isShow?"添加":"更新"))])],1)]):i("el-empty",{attrs:{image:"https://img.fphdcdn.com/member/2023-02-17QzWz4neFMa.png",description:"页面加载出错"}})],1)}),[],!1,null,"70e0b285",null).exports},created(){this.getMemoList()},methods:{async getMemoList(){let t={create_date:(0,r.zi)(this.form.create_date,1)};const e=await(0,a.Oy)(t);try{this.memorandumList=e.data}catch(i){throw new Error("No Data")}finally{setTimeout((()=>{this.loading=!1}),1e3)}},reset(){this.form={create_date:""},this.getMemoList()},addUserInfo(){this.dialogVisible=!0,this.title="添加备忘录信息",this.visibleType="add"},updateUserList(t){this.dialogVisible=t,this.getMemoList()},updatData(t){this.dialogVisible=!0,this.title="修改用户信息",this.updataInfoVisible=t,this.visibleType="update"},delUserInfo({id:t}){this.$alert("是否删除这条用户信息","用户信息",{confirmButtonText:"确定",callback:e=>{"confirm"==e&&this.confirmDel(t)}})},async confirmDel(t){let e={id:t};await(0,a.vE)(e);try{this.$message.success("删除数据成功"),this.getMemoList()}catch(i){throw new Error("No Data")}}}},d=(0,n.Z)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"requestText"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.$t("headerList.Memorandum")))])]),i("div",{staticClass:"container"},[i("div",{staticClass:"screen"},[i("div",{staticClass:"screee_ipt"},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.create_date,callback:function(e){t.$set(t.form,"create_date",e)},expression:"form.create_date"}})],1),i("div",{staticClass:"screen_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.getMemoList}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addUserInfo}},[t._v("添加")]),i("el-link",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("重置")])],1)]),i("div",{staticClass:"table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"50vw"},attrs:{data:t.memorandumList,stripe:"",border:""}},[i("el-table-column",{attrs:{prop:"create_date",label:"日期",align:"center"}}),i("el-table-column",{attrs:{prop:"weather",label:"天气",align:"center"}}),i("el-table-column",{attrs:{prop:"content",label:"记录",align:"center"}}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-link",{staticClass:"mr30",attrs:{type:"primary"},on:{click:function(e){return t.updatData(a)}}},[t._v("更新")]),i("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.delUserInfo(a)}}},[t._v("删除")])]}}])})],1)],1)])]),i("BasePopUp",{attrs:{dialogVisible:t.dialogVisible,title:t.title,updataInfoVisible:t.updataInfoVisible,visibleType:t.visibleType},on:{"update:visible":t.updateUserList}})],1)}),[],!1,null,"a710bebc",null).exports}}]);