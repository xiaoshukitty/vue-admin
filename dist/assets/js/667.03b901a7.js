"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[667],{21498:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"requestText"},[t("div",{staticClass:"container"},[t("div",{staticClass:"screen"},[t("div",{staticClass:"screee_ipt"},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),t("div",{staticClass:"screen_btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getUserList}},[e._v("搜索")]),t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addUserInfo}},[e._v("添加")]),t("el-link",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")])],1)]),t("div",{staticClass:"table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"50vw"},attrs:{data:e.userList,stripe:"",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),t("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-link",{staticClass:"mr30",attrs:{type:"primary"},on:{click:function(t){return e.updatData(a)}}},[e._v("更新")]),t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.delUserInfo(a)}}},[e._v("删除")])]}}])})],1)],1),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:40},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),t("BasePopUp",{attrs:{dialogVisible:e.dialogVisible,title:e.title,updataInfoVisible:e.updataInfoVisible,visibleType:e.visibleType},on:{"update:visible":e.updateUserList}})],1)},s=[],r=a(3799),l=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,visible:e.dialogOrder,width:"30%","append-to-body":!0,"close-on-click-modal":!0},on:{"update:visible":function(t){e.dialogOrder=t}}},[t("div",{staticClass:"pop_up"},[t("div",{staticClass:"container"},[t("div",{staticClass:"w80"},[e._v("请输入用户名称")]),t("div",[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)]),t("div",{staticClass:"container"},[t("div",{staticClass:"w80"},[e._v("请输入用户年龄")]),t("div",[t("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.form.userAge,callback:function(t){e.$set(e.form,"userAge",t)},expression:"form.userAge"}})],1)]),t("div",{staticClass:"btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.operationUserInfo}},[e._v(e._s(e.isShow?"添加":"更新"))])],1)])])},n=[],o={props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:""},updataInfoVisible:{type:Object,default:()=>{}},visibleType:{type:String,default:""}},data(){return{form:{userName:"",userAge:"",id:""}}},watch:{updataInfoVisible(e){const{name:t,age:a,id:i}=e;this.form={userName:t,userAge:a,id:i}}},computed:{dialogOrder:{get(){return this.dialogVisible},set(e){this.$emit("update:visible",e)}},isShow(){return"add"==this.visibleType}},methods:{init(){this.form={userName:"",userAge:""}},operationUserInfo(){this.isShow?this.addUserInfo():this.updateUserInfo()},async addUserInfo(){let e={age:this.form.userAge,name:this.form.userName};await(0,r.$8)(e);try{this.$message.success("添加用户成功"),setTimeout((()=>{this.$emit("update:visible",!1),this.init()}),500)}catch{throw new Error("No Data")}},async updateUserInfo(){console.log("更新");let e={age:this.form.userAge,name:this.form.userName,id:this.form.id};await(0,r.cZ)(e);try{this.$message.success("甜心用户数据成功"),setTimeout((()=>{this.$emit("update:visible",!1)}),500)}catch{throw new Error("No Data")}}}},c=o,d=a(1001),u=(0,d.Z)(c,l,n,!1,null,"1f940107",null),p=u.exports,g={name:"RequestText",data(){return{age1:"",name1:"",userList:[],form:{age:"",name:""},pageInfo:{page:1,pageSize:10},dialogVisible:!1,title:"",updataInfoVisible:{},visibleType:"",loading:!1,currentPage:1}},components:{BasePopUp:p},created(){this.getUserList(),this.getMemoList()},methods:{async getMemoList(){const e=await(0,r.Oy)();console.log("res0000",e)},async getUserList(){this.loading=!0;let e={age:this.form.age,name:this.form.name,page:this.pageInfo.page,pageSize:this.pageInfo.pageSize};const t=await(0,r.Lh)(e);try{this.userList=t.data}catch(a){throw new Error("No Data")}finally{setTimeout((()=>{this.loading=!1}),1e3)}},reset(){this.form={age:"",name:""},this.getUserList()},addUserInfo(){this.dialogVisible=!0,this.title="添加用户信息",this.visibleType="add"},updateUserList(e){this.dialogVisible=e,this.getUserList()},updatData(e){this.dialogVisible=!0,this.title="修改用户信息",this.updataInfoVisible=e,this.visibleType="update"},delUserInfo({id:e}){this.$alert("是否删除这条用户信息","用户信息",{confirmButtonText:"确定",callback:t=>{"confirm"==t&&this.confirmDel(e)}})},async confirmDel(e){let t={id:e};await(0,r.qJ)(t);try{this.$message.success("删除数据成功"),this.getUserList()}catch(a){throw new Error("No Data")}},handleSizeChange(){},handleCurrentChange(){}}},m=g,h=(0,d.Z)(m,i,s,!1,null,"8fbb1322",null),f=h.exports}}]);