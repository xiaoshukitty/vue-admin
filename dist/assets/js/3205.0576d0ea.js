"use strict";(self.webpackChunkvue_test=self.webpackChunkvue_test||[]).push([[3205],{43205:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-waterfall-container",style:{width:e.width&&!e.isMobile?e.width+"px":"",height:parseFloat(e.height)==e.height?e.height+"px":e.height}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreloading,expression:"isPreloading"}],staticClass:"loading ball-beat",class:{first:e.isFirstLoad}},[e._t("loading"),e._v(" "),e.hasLoadingSlot?e._e():e._l(e.loadingDotCount,(function(t,s){return i("div",{key:s,staticClass:"dot",style:e.loadingDotStyle})}))],2),e._v(" "),i("div",{ref:"scrollEl",staticClass:"vue-waterfall-scroll"},[e._t("waterfall-head"),e._v(" "),i("div",{staticClass:"vue-waterfall",style:e.isMobile?"":{width:e.colWidth*e.cols+"px",left:"50%",marginLeft:-1*e.colWidth*e.cols/2+"px"}},e._l(e.imgsArr_c,(function(t,s){return i("div",{key:s,staticClass:"img-box",class:[e.cardAnimationClass,{__err__:t._error}],style:{padding:e.gap_c/2+"px",width:e.isMobile?"":e.colWidth+"px"},on:{click:function(i){return e.handleClickImage(i,{value:t,index:s})}}},[i("div",{class:[e.cardClass]},[e.hasHeaderSlot?i("div",{staticClass:"img-box-header"},[e._t("header",null,{data:t})],2):e._e(),e._v(" "),t[e.srcKey]?i(e.linkName,{tag:"component",staticClass:"img-inner-box",style:{width:e.imgWidth_c+"px",height:!!t._height&&t._height+"px"},attrs:{"data-index":s}},[i("img",{attrs:{src:t[e.srcKey]}})]):e._e(),e._v(" "),e.hasFooterSlot?i("div",{staticClass:"img-box-footer"},[e._t("footer",null,{data:t})],2):e._e()],1)])})),0)],2)])},staticRenderFns:[],name:"pt-vue-waterfall",props:{width:{type:Number},height:{type:[Number,String]},loadingDotCount:{type:Number,default:3},loadingDotStyle:{type:Object},srcKey:{type:String,default:"src"},imgWidth:{type:Number,default:240},gap:{type:Number,default:20},mobileGap:{type:Number,default:8},imgsArr:{type:Array,required:!0},maxCols:{type:Number,default:5},cardAnimationClass:{type:[String],default:"default-card-animation"},cardClass:{type:[String],default:""},enablePullDownEvent:{type:Boolean,default:!1},reachBottomDistance:{type:Number,default:20}},data:()=>({isMobile:!1,isPreloading:!0,imgsArr_c:[],cols:NaN,loadedCount:0,isFirstLoad:!0,imgBoxEls:null,beginIndex:0,colsHeightArr:[],linkName:"Link"}),components:{Link:{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"link"},[e._t("default")],2)},staticRenderFns:[],name:"Link",props:["to"]}},computed:{hasLoadingSlot(){return!!this.$scopedSlots.loading},hasFooterSlot(){return!!this.$scopedSlots.footer},hasHeaderSlot(){return!!this.$scopedSlots.header},imgWidth_c(){return this.isMobile?window.innerWidth/2:this.imgWidth},gap_c(){return this.isMobile?this.mobileGap:this.gap},colWidth(){return this.imgWidth_c+this.gap_c}},watch:{imgsArr(e,t){(this.imgsArr_c.length>e.length||this.imgsArr_c.length>0&&e[0]&&!e[0]._height)&&this.reset(),this.preload()}},methods:{preload(){this.imgsArr.forEach(((e,t)=>{if(t<this.loadedCount)return;if(!e[this.srcKey])return this.imgsArr[t]._height="0",this.loadedCount++,void(this.loadedCount==this.imgsArr.length&&this.$emit("preloaded"));let i=new Image;i.src=e[this.srcKey],i.onload=i.onerror=e=>{this.loadedCount++,this.imgsArr[t]._height="load"==e.type?Math.round(this.imgWidth_c*(i.height/i.width)):this.imgWidth_c,"error"==e.type&&(this.imgsArr[t]._error=!0,this.$emit("imgError",this.imgsArr[t])),this.loadedCount===this.imgsArr.length&&this.$emit("preloaded")}}))},calcuCols(){let e=this.width?this.width:window.innerWidth,t=Math.max(parseInt(e/this.colWidth),1);return this.isMobile?2:Math.min(t,this.maxCols)},waterfall(){if(this.imgBoxEls=this.$el.getElementsByClassName("img-box"),!this.imgBoxEls)return;let e,t,i,s=this.isMobile?this.imgBoxEls[0].offsetWidth:this.colWidth;0==this.beginIndex&&(this.colsHeightArr=[]);for(let a=this.beginIndex;a<this.imgsArr.length;a++){if(!this.imgBoxEls[a])return;if(i=this.imgBoxEls[a].offsetHeight,a<this.cols)this.colsHeightArr.push(i),e=0,t=a*s;else{let a=Math.min.apply(null,this.colsHeightArr),r=this.colsHeightArr.indexOf(a);e=a,t=r*s,this.colsHeightArr[r]=a+i}this.imgBoxEls[a].style.left=t+"px",this.imgBoxEls[a].style.top=e+"px"}this.beginIndex=this.imgsArr.length},response:function(){let e=this.cols;this.cols=this.calcuCols(),e!==this.cols&&(this.beginIndex=0,this.waterfall())},scrollFn(){let e=this.$refs.scrollEl;if(this.isPreloading)return;let t=Math.min.apply(null,this.colsHeightArr);e.scrollTop+e.offsetHeight>t-this.reachBottomDistance&&(this.isPreloading=!0,this.$emit("scrollReachBottom"))},scroll(){this.$refs.scrollEl.addEventListener("scroll",this.scrollFn)},handleClickImage(e,t){this.$emit("click",e,t)},pullDown(){let e,t=this.$el.querySelector(".vue-waterfall-scroll");t.addEventListener("touchmove",(i=>{if(0===t.scrollTop){let t=i.changedTouches[0];e||(e=t.pageY);let s=t.pageY-e;s>0&&i.preventDefault(),this.$emit("pullDownMove",s)}})),t.addEventListener("touchend",(i=>{0===t.scrollTop&&(e=NaN,this.$emit("pullDownEnd"))}))},footerHeight:function(){},reset:function(){this.imgsArr_c=[],this.beginIndex=0,this.loadedCount=0,this.isFirstLoad=!0,this.isPreloading=!0}},mounted(){this.isMobile=!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),this.preload(),this.cols=this.calcuCols(),this.$on("preloaded",(()=>{this.isFirstLoad=!1,this.imgsArr_c=this.imgsArr.concat([]),this.$nextTick((()=>{this.isPreloading=!1,this.waterfall()}))})),this.isMobile||this.width||window.addEventListener("resize",this.response),this.isMobile&&this.enablePullDownEvent&&this.pullDown(),this.scroll()}};const a=[s];"undefined"!=typeof window&&window.Vue&&function(e){a.forEach((t=>{e.component(t.name,t)}))}(window.Vue);var r={components:{vueWaterfallEasy:s},data(){return{imgsArr:[{src:"https://gimg2.baid=http%3A%2F%2Fimage.biaobaiju.com%2Fuploads%2F20180211%2F00%2F1518279736-ImsfeASJcb.jpg&refer=http%3A%2F%2Fimage.biaobaiju.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=401c068f0a25ed2a42a4b070c6ee6a96",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fq_70%2Cc_zoom%2Cw_640%2Fimages%2F20190210%2F8534c3170a314d83b104d04aa120a040.jpeg&refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=d15af814c4ae34b95bc60e35efc88e4c",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.desktx.com%2Fd%2Ffile%2Fwallpaper%2Fanimals%2F20160822%2F05128add3de7bc5acfa3a38612673e1d.jpg&refer=http%3A%2F%2Fwww.desktx.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=667c221c38da5abdb0ed7d34d87ef564",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.yidianzhidao.com%2FUploadFiles%2Fimg_1_1195934273_1809290298_26.jpg&refer=http%3A%2F%2Fwww.yidianzhidao.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=220f9c21856a2bb0cc71f76ba0b5e2cc",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fblog%2F201508%2F10%2F20150810150356_hnves.thumb.400_0.jpeg&refer=http%3A%2F%2Fb-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=0971bf1e69ad8e180fb704140d7a29b0",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage.biaobaiju.com%2Fuploads%2F20180211%2F01%2F1518282902-iSBdILoxsY.jpg&refer=http%3A%2F%2Fimage.biaobaiju.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=c4c6cd3890f420680e5db7f92a8d543c",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage.biaobaiju.com%2Fuploads%2F20190504%2F20%2F1556972126-MAGsvFyfEd.png&refer=http%3A%2F%2Fimage.biaobaiju.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=4ecd99f7107e39197378a2b7a04176c6",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Ffile06.16sucai.com%2F2016%2F0506%2Ff43b5bab036349f7b4ffdef661da97a8.jpg&refer=http%3A%2F%2Ffile06.16sucai.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=fd805292f3f72e9d7ba51fc9f45245ea",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.win4000.com%2Fpic%2F3%2F5a%2Ffe101126073_250_350.jpg&refer=http%3A%2F%2Fpic1.win4000.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=72446335a210920f58bf6c6e6a106abe",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbos.pgzs.com%2Frbpiczy%2FWallpaper%2F2015%2F1%2F22%2Fe975967d962e45a7af2863060371d81c-12.jpg&refer=http%3A%2F%2Fbos.pgzs.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440861&t=775ff5be8b8b1e9abc8848ff575e437d",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.qqtn.com%2Fup%2F2017-11%2F2017110816281636782.jpg&refer=http%3A%2F%2Fpic.qqtn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440862&t=36bd6acad4963ad2d153b3a4e220a363",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage.biaobaiju.com%2Fuploads%2F20190624%2F14%2F1561358677-yVQerfxNJO.jpeg&refer=http%3A%2F%2Fimage.biaobaiju.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440862&t=25e73d0d95ee43d9b160bd0dfe24aa38",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage.biaobaiju.com%2Fuploads%2F20180211%2F01%2F1518282942-vBSpHErLKP.jpg&refer=http%3A%2F%2Fimage.biaobaiju.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440862&t=809ae8cf1c654bb83dbbab9437b8e276",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.ivsky.com%2Fimg%2Ftupian%2Fpre%2F201611%2F09%2Fsugelan_zheer_mao-002.jpg&refer=http%3A%2F%2Fimg.ivsky.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638440862&t=962fa67d0f3fff40553440ccb8b06ec4",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fn.sinaimg.cn%2Fsinacn%2Fw640h399%2F20180301%2F9ce9-fwnpcns9232331.jpg&refer=http%3A%2F%2Fn.sinaimg.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638441157&t=46c567a84e0172aa430f0d058ba9a92f",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fn.sinaimg.cn%2Fsinacn%2Fw640h640%2F20180109%2F9e54-fyqnici8428669.jpg&refer=http%3A%2F%2Fn.sinaimg.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638441197&t=70f9aec9253df0dcea506df28938327a",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.euro-premium.cn%2Fsites%2Fdefault%2Ffiles%2F2017%2F12%2F2017-12-18-609.jpg&refer=http%3A%2F%2Fwww.euro-premium.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638441197&t=e67e19c5e29ebd66265d2ed779359002",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fqqpublic.qpic.cn%2Fqq_public%2F0%2F0-2816258155-A3E56E8F829BF213072E703F23FC3DC1%2F0%3Ffmt%3Djpg%26size%3D21%26h%3D550%26w%3D410%26ppv%3D1.jpg&refer=http%3A%2F%2Fqqpublic.qpic.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638441314&t=def05d46f7dee911d2a2a8bb306976d5",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.euro-premium.cn%2Fsites%2Fdefault%2Ffiles%2F2017%2F09%2F2017-09-30-110.jpg&refer=http%3A%2F%2Fwww.euro-premium.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638441314&t=d4d758316d5f48f3800b59a2eec7dc46",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"},{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.goupuzi.com%2Fnewatt%2FMon_2004%2F1_183281_b959196b41fb01e.jpg&refer=http%3A%2F%2Fwww.goupuzi.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638441314&t=663a187a9631164c450e2b3b3e1b8d92",href:"https://www.baidu.com",info:"一些图片描述文字",headerText:"头部"}]}},methods:{handleReachBottom:function(){this.imgsArr=this.imgsArr.concat(this.imgsArr)},handleClick(){}}},h=(0,i(43736).Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"waterfallFlow"},[i("vue-waterfall-easy",{attrs:{imgsArr:e.imgsArr,"img-width":300,cardClass:"cardStyle"},on:{scrollReachBottom:e.handleReachBottom,click:e.handleClick},scopedSlots:e._u([{key:"header",fn:function(t){return[i("div",{staticStyle:{width:"100%",height:"100px",overflow:"hidden"}},[i("div",[e._v(e._s(t.data.headerText))])])]}},{key:"footer",fn:function(t){return[i("div",{staticStyle:{width:"100%",height:"200px",overflow:"hidden"}},[i("div",[e._v(e._s(t.data.info))])])]}}])})],1)}),[],!1,null,null,null).exports}}]);