"use strict";(self.webpackChunkvue_test=self.webpackChunkvue_test||[]).push([[326],{1326:function(t,e,a){a.r(e),a.d(e,{default:function(){return i}});var e=a(61120),n=a.n(e),e=a(83874),r=a.n(e),o=a(42325),e={data(){return{imgURLs:""}},mounted(){this.xianDuan()},methods:{downloadIamge(){if(""==this.imgURLs)return this.$message.warning("请先截图在下载");var t=(new Date).getTime()+".png";(0,o.iw)(this.imgURLs,t)},capture(){setTimeout(()=>{var t=document.querySelector("#poster");n()(t,{scale:2,logging:!1,useCORS:!0,tainttest:!0}).then(t=>{this.imgURLs=t.toDataURL()})},100)},qrcode(){document.getElementById("qrcode").innerHTML="",new(r())(this.$refs.qrCodeUrl,{text:"优化qrcode中文乱码",width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",errorCorrectionLevel:"L",type:"image/png",quality:.3,margin:5,color:{dark:"#666666",light:"#fff"}}),this.capture()},xianDuan(){var t=document.getElementById("myCanvas").getContext("2d");t.beginPath(),t.arc(75,75,50,0,2*Math.PI,!0),t.moveTo(110,75),t.arc(75,75,35,0,Math.PI,!1),t.moveTo(65,65),t.arc(60,65,5,0,2*Math.PI,!0),t.moveTo(95,65),t.arc(90,65,5,0,2*Math.PI,!0),t.stroke(),t.font="30px Arial",t.fillText("Hello canvas",10,150),t.strokeText("Hello canvas",10,180),t.stroke()}}},i=(0,a(1001).Z)(e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas"},[e("canvas",{attrs:{id:"myCanvas",width:"500",height:"300"}}),e("div",{staticClass:"poster_box"},[e("div",{staticClass:"poster",attrs:{id:"poster"}},[e("div",{ref:"qrCodeUrl",staticClass:"qrcode",attrs:{id:"qrcode"}})]),e("el-button",{attrs:{type:"primary"},on:{click:t.qrcode}},[t._v("截图")]),e("el-button",{attrs:{type:"primary"},on:{click:t.downloadIamge}},[t._v("下载")])],1)])},[],!1,null,"633affed",null).exports},42325:function(t,e,a){a.d(e,{iw:function(){return n},oW:function(){return r}});const n=(t,n)=>{var r=new Image;r.setAttribute("crossOrigin","anonymous"),r.onload=function(){var t=document.createElement("canvas");t.width=r.width,t.height=r.height;t.getContext("2d").drawImage(r,0,0,r.width,r.height);var t=t.toDataURL("image/png"),e=document.createElement("a"),a=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.download=n||"photo",e.href=t,e.dispatchEvent(a)},r.src=t};const r=(t,e,a,n)=>{function r(t){return t*Math.PI/180}t=r(t),a=r(a),e=r(e)-r(n),n=2*Math.asin(Math.sqrt(Math.pow(Math.sin((t-a)/2),2)+Math.cos(t)*Math.cos(a)*Math.pow(Math.sin(e/2),2))),n*=6378.137,t=n=Math.round(1e4*n)/1e4,a="",a=1<=parseInt(t)?t.toFixed(2)+"km":(1e3*t).toFixed(2)+"m";return{distance:t,distance_str:a}}}}]);