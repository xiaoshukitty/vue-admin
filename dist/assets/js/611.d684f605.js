"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[611],{49611:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"requestText"},[i("div",{staticClass:"container"},[i("div",{staticClass:"screen"},[i("div",{staticClass:"screee_ipt"},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.create_date,callback:function(t){e.$set(e.form,"create_date",t)},expression:"form.create_date"}})],1),i("div",{staticClass:"screen_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.getMemoList}},[e._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addUserInfo}},[e._v("添加")]),i("el-link",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")])],1)]),i("div",{staticClass:"table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"50vw"},attrs:{data:e.memorandumList,stripe:"",border:""}},[i("el-table-column",{attrs:{prop:"create_date",label:"日期",align:"center"}}),i("el-table-column",{attrs:{prop:"weather",label:"天气",align:"center"}}),i("el-table-column",{attrs:{prop:"content",label:"记录",align:"center"}}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-link",{staticClass:"mr30",attrs:{type:"primary"},on:{click:function(t){return e.updatData(a)}}},[e._v("更新")]),i("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.delUserInfo(a)}}},[e._v("删除")])]}}])})],1)],1)]),i("BasePopUp",{attrs:{dialogVisible:e.dialogVisible,title:e.title,updataInfoVisible:e.updataInfoVisible,visibleType:e.visibleType},on:{"update:visible":e.updateUserList}})],1)},n=[],r=i(3799),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.title,visible:e.dialogOrder,width:"30%","append-to-body":!0,"close-on-click-modal":!0},on:{"update:visible":function(t){e.dialogOrder=t}}},[e.pageMistake?i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pop_up",attrs:{"element-loading-text":e.loadingText}},[i("div",{staticClass:"container"},[i("div",{staticClass:"w80"},[e._v("请输入时间")]),i("div",[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)]),i("div",{staticClass:"container"},[i("div",{staticClass:"w80"},[e._v("请选择当前天气")]),i("div",{staticStyle:{flex:"1"}},[i("div",{staticClass:"list"},e._l(e.weatherList,(function(t,a){return i("div",{key:a,class:["item",t.id==e.ind?"selectItem":""],on:{click:function(i){return e.selectItem(t)}}},[e._v(" "+e._s(t.weather)+" ")])})),0)])]),i("div",{staticClass:"container"},[i("div",{staticClass:"w80"},[e._v("请输入当前内容")]),i("div",{staticStyle:{flex:"1"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入当前内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)]),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.operationUserInfo}},[e._v(e._s(e.isShow?"添加":"更新"))])],1)]):i("el-empty",{attrs:{image:"https://img.fphdcdn.com/member/2023-02-17QzWz4neFMa.png",description:"页面加载出错"}})],1)},o=[];const l=[{id:0,weather:"晴"},{id:1,weather:"多云"},{id:2,weather:"阴"},{id:3,weather:"阵雨"},{id:4,weather:"雷阵雨"},{id:5,weather:"雷阵雨伴有冰雹"},{id:6,weather:"雨夹雪"},{id:7,weather:"小雨"},{id:8,weather:"中雨"},{id:9,weather:"大雨"},{id:10,weather:"暴雨"},{id:11,weather:"大暴雨"},{id:12,weather:"特大暴雨"},{id:13,weather:"阵雪"},{id:14,weather:"小雪"},{id:15,weather:"中雪"},{id:16,weather:"大雪"},{id:17,weather:"暴雪"},{id:18,weather:"雾"},{id:19,weather:"冻雨"}];var d=i(42325),c={props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:""},updataInfoVisible:{type:Object,default:()=>{}},visibleType:{type:String,default:""}},name:"BasePopUp",data(){return{form:{date:"",content:""},weatherList:l,ind:"-1",loading:!1,loadingText:"",pageMistake:null}},watch:{updataInfoVisible(e){if(this.isTrueFalse(),!(0,d.FR)(e))return this.loading=!0,this.init(),void setTimeout((()=>{this.pageMistake=(0,d.FR)(e)}),3e3);const{create_date:t,weather:i,content:a,id:n}=e;this.form={date:new Date(t),content:a,id:n},this.ind=l.find((e=>e.weather==i)).id},visibleType(e){console.log("newValue---",e),"add"==e&&this.init()}},computed:{dialogOrder:{get(){return this.dialogVisible},set(e){this.$emit("update:visible",e)}},isShow(){return"add"==this.visibleType}},methods:{init(){this.form={date:"",content:""},this.ind="-1","add"==this.visibleType&&this.isTrueFalse()},operationUserInfo(){this.isShow?this.addMemorandumInfo():this.updateMemoInfo()},async addMemorandumInfo(){let e=(0,d.zi)(this.form.date,1),t={create_date:e,weather:this.weatherList[Number(this.ind)].weather,content:this.form.content};await(0,r.Wc)(t);try{this.$message.success("添加备忘录信息成功"),setTimeout((()=>{this.$emit("update:visible",!1),this.init()}),500)}catch{throw new Error("No Data")}},async updateMemoInfo(){console.log("更新");let e=(0,d.zi)(this.form.date,1),t={create_date:e,weather:this.weatherList[Number(this.ind)].weather,content:this.form.content,id:this.form.id};await(0,r.ns)(t);try{this.$message.success("甜心用户数据成功"),setTimeout((()=>{this.$emit("update:visible",!1)}),500)}catch{throw new Error("No Data")}},selectItem({id:e}){this.ind=e},isTrueFalse(){this.pageMistake=!0,this.loading=!1}}},u=c,h=i(43736),p=(0,h.Z)(u,s,o,!1,null,"70e0b285",null),m=p.exports,f={name:"RequestText",data(){return{memorandumList:[],form:{create_date:""},dialogVisible:!1,title:"",updataInfoVisible:{},visibleType:"",loading:!1,currentPage:1}},components:{BasePopUp:m},created(){this.getMemoList()},methods:{async getMemoList(){let e=(0,d.zi)(this.form.create_date,1),t={create_date:e};const i=await(0,r.Oy)(t);try{this.memorandumList=i.data}catch(a){throw new Error("No Data")}finally{setTimeout((()=>{this.loading=!1}),1e3)}},reset(){this.form={create_date:""},this.getMemoList()},addUserInfo(){this.dialogVisible=!0,this.title="添加备忘录信息",this.visibleType="add"},updateUserList(e){this.dialogVisible=e,this.getMemoList()},updatData(e){this.dialogVisible=!0,this.title="修改用户信息",this.updataInfoVisible=e,this.visibleType="update"},delUserInfo({id:e}){this.$alert("是否删除这条用户信息","用户信息",{confirmButtonText:"确定",callback:t=>{"confirm"==t&&this.confirmDel(e)}})},async confirmDel(e){let t={id:e};await(0,r.vE)(t);try{this.$message.success("删除数据成功"),this.getMemoList()}catch(i){throw new Error("No Data")}}}},w=f,g=(0,h.Z)(w,a,n,!1,null,"79dbf7a8",null),v=g.exports},42325:function(e,t,i){i.d(t,{AM:function(){return c},FR:function(){return o},JM:function(){return n},iw:function(){return a},jE:function(){return l},oW:function(){return r},tK:function(){return d},zi:function(){return s}});i(57658);const a=(e,t)=>{var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;var a=e.getContext("2d");a.drawImage(i,0,0,i.width,i.height);var n=e.toDataURL("image/png"),r=document.createElement("a"),s=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});r.download=t||"photo",r.href=n,r.dispatchEvent(s)},i.src=e},n=(e,t)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(4===i.readyState&&200===i.status){const e=this.response,i=window.URL.createObjectURL(new Blob([e],{type:"video/mp4"})),a=document.createElement("a");a.download=t,a.href=i,a.style.display="none",document.body.appendChild(a),a.click(),a.remove()}},i.send()},r=(e,t,i,a)=>{function n(e){return e*Math.PI/180}var r=n(e),s=n(i),o=r-s,l=n(t)-n(a),d=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(r)*Math.cos(s)*Math.pow(Math.sin(l/2),2)));d*=6378.137,d=Math.round(1e4*d)/1e4;var c=d,u="";u=parseInt(c)>=1?c.toFixed(2)+"km":(1e3*c).toFixed(2)+"m";let h={distance:c,distance_str:u};return h},s=(e,t)=>{if(void 0==e||""==e)return;var i=new Date(Number(e)),a=i.getFullYear(),n=i.getMonth()+1<10?"0"+(i.getMonth()+1):""+(i.getMonth()+1),r=i.getDate()<10?"0"+i.getDate():""+i.getDate(),s=i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():""+i.getMinutes(),l=i.getSeconds();const d=e=>{let t=new Map([[1,a+"-"+n+"-"+r],[2,a+"-"+n+"-"+r+" "+s+":"+o+":"+l],["default",a+"-"+n+"-"+r+" "+s+":"+o+":"+l]]);return t.get(e)||t.get("default")};return d(t)},o=e=>{let t=!0;return Object.keys(e).forEach((function(i){null!==e[i]&&void 0!==e[i]||(t=!1)})),t},l=(e,t)=>{for(let i=0;i<e.length;i++){if(e[i].router===t)return e[i].name;if(e[i].children&&e[i].children.length>0){let a=l(e[i].children,t);if(a)return e[i].name+" / "+a}}return null},d=(e,t)=>{var i=!1,a=null;function n(e,t){for(var r=0;r<e.length;r++)if(e[r].children&&e[r].children.length>0&&n(e[r].children,t),t===e[r].router||i){i||(a=e[r]),i=!0;break}}return n(e,t),a},c=e=>{let t=[];return e.forEach((e=>{e.children?(t.push(e,...c(e.children)),delete e["children"]):t.push(e)})),t}}}]);