"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[302],{40302:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 地图")]),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%",height:"60%",top:"10vh"},on:{close:e.closeDialog,"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"amap-page-container",staticStyle:{width:"100%",height:"550px",margin:"0px"}},[t("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),t("el-amap",{ref:"map",staticClass:"amap-demo",attrs:{vid:"amapDemo","amap-manager":e.amapManager,center:e.center,zoom:e.zoom,plugin:e.plugin,events:e.events}},e._l(e.markers,(function(e,o){return t("el-amap-marker",{key:o,attrs:{position:e.position,label:e.label,icon:e.icon}})})),1),t("div",{staticStyle:{display:"flex",position:"relative"}},[t("div",{staticClass:"adress"},[t("p",[e._v(e._s(e.address))]),t("p",[e._v(e._s(e.center))])]),t("div",{staticClass:"confirm",on:{click:function(t){return e.comfirmLngLat(e.center,e.address)}}},[e._v("确定")])])],1)])],1)},i=[],n=(o(57658),o(25275));let s=new n.AMapManager;var r={data(){const e=this;return{dialogVisible:!1,zoom:15,address:"",center:[114.351733,29.900505],markers:[],searchOption:{city:"",citylimit:!1},amapManager:s,plugin:[{pName:"Geolocation",events:{init(t){console.log("触发了----",t),t.getCurrentPosition(((t,o)=>{if(o&&o.position){e.lng=o.position.lng,e.lat=o.position.lat,e.address=o.formattedAddress,e.center=[e.lng,e.lat];let t=s.getMap();e.marker||(e.marker=new AMap.Marker({position:e.center}),e.marker.setMap(t)),e.marker.setPosition(e.center)}}))}}}],plugin:["ToolBar",{pName:"MapType",defaultType:0,events:{init(e){}}}],events:{init:e=>{e.getCity((e=>{}))},moveend:()=>{},zoomchange:()=>{},click:t=>{console.log("点击地图选择的位置+",t),e.lng=t.lnglat.lng,e.lat=t.lnglat.lat,e.center=[e.lng,e.lat];let o=s.getMap();e.marker||(e.marker=new AMap.Marker({position:t.lnglat}),e.marker.setMap(o)),e.marker.setPosition(t.lnglat);let a=new AMap.Geocoder({});a.getAddress(t.lnglat,(function(t,o){"complete"===t&&o.regeocode?e.address=o.regeocode.formattedAddress:log.error("根据经纬度查询地址失败")}))}},markers:[{position:[114.351733,29.900505],label:{content:"骑手",offset:[-20,-30]},icon:"https://img.fphdcdn.com/member/2023-01-13PPf3JHHHx5.png"},{position:[114.345458,29.895411],label:{content:"店家",offset:[-20,-30]},icon:"https://img.fphdcdn.com/member/2023-01-13PPf3JHHHx5.png"}]}},created(){this.getLongitudeLatitude(),this.markers.push(this.center)},methods:{closeDialog(){this.dialogVisible=!1},onSearchResult(e){if(console.log("触发了pois",e),e.length>0){let{lng:t,lat:o,name:a,location:i}=e[0],n=[t,o];this.lng=t,this.lat=o,this.center=[t,o];let r=s.getMap();this.marker||(this.marker=new AMap.Marker({position:n}),this.marker.setMap(r)),this.marker.setPosition(n);let l=new AMap.Geocoder({}),c=this;l.getAddress(i,(function(e,t){console.log(e,t),"complete"===e&&t.regeocode?c.address=t.regeocode.formattedAddress:console.log("根据经纬度查询地址失败")}))}},comfirmLngLat(e,t){this.dialogVisible=!1,console.log("经纬度",e),console.log("选择的地址",t)},getLongitudeLatitude(){if("geolocation"in navigator){var e={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function t(e){console.log("position",e);e.coords.latitude,e.coords.longitude}function o(e){console.log("err",e);var t=["您拒绝共享位置信息","获取不到位置信息","获取位置信息超时"];console.log(t[e.code-1])}navigator.geolocation.getCurrentPosition(t,o,e)}else console.log("无法获取您的位置，请检查定位是否开启或刷新重试")}}},l=r,c=o(1001),g=(0,c.Z)(l,a,i,!1,null,"da710542",null),d=g.exports}}]);