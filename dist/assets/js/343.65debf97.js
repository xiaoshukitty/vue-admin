"use strict";(self.webpackChunkvue_test=self.webpackChunkvue_test||[]).push([[343],{37343:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var i=a(3799),s={props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:""},updataInfoVisible:{type:Object,default:()=>{}},visibleType:{type:String,default:""}},data(){return{form:{userName:"",userAge:"",id:""}}},watch:{updataInfoVisible(e){const{name:t,age:a,id:i}=e;this.form={userName:t,userAge:a,id:i}}},computed:{dialogOrder:{get(){return this.dialogVisible},set(e){this.$emit("update:visible",e)}},isShow(){return"add"==this.visibleType}},methods:{init(){this.form={userName:"",userAge:""}},operationUserInfo(){this.isShow?this.addUserInfo():this.updateUserInfo()},async addUserInfo(){let e={age:this.form.userAge,name:this.form.userName};await(0,i.$8)(e);try{this.$message.success("添加用户成功"),setTimeout((()=>{this.$emit("update:visible",!1),this.init()}),500)}catch{throw new Error("No Data")}},async updateUserInfo(){let e={age:this.form.userAge,name:this.form.userName,id:this.form.id};await(0,i.cZ)(e);try{this.$message.success("甜心用户数据成功"),setTimeout((()=>{this.$emit("update:visible",!1)}),500)}catch{throw new Error("No Data")}}}},r=a(43736),l={name:"RequestText",data(){return{age1:"",name1:"",userList:[],form:{age:"",name:""},pageInfo:{page:1,pageSize:10},dialogVisible:!1,title:"",updataInfoVisible:{},visibleType:"",loading:!1,currentPage:1}},components:{BasePopUp:(0,r.Z)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogOrder,width:"30%","append-to-body":!0,"close-on-click-modal":!0},on:{"update:visible":function(t){e.dialogOrder=t}}},[a("div",{staticClass:"pop_up"},[a("div",{staticClass:"container"},[a("div",{staticClass:"w80"},[e._v("请输入用户名称")]),a("div",[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"w80"},[e._v("请输入用户年龄")]),a("div",[a("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.form.userAge,callback:function(t){e.$set(e.form,"userAge",t)},expression:"form.userAge"}})],1)]),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.operationUserInfo}},[e._v(e._s(e.isShow?"添加":"更新"))])],1)])])}),[],!1,null,"2e5cc53d",null).exports},created(){this.getUserList(),this.getMemoList()},methods:{async getMemoList(){await(0,i.Oy)()},async getUserList(){this.loading=!0;let e={age:this.form.age,name:this.form.name,page:this.pageInfo.page,pageSize:this.pageInfo.pageSize};const t=await(0,i.Lh)(e);try{this.userList=t.data}catch(a){throw new Error("No Data")}finally{setTimeout((()=>{this.loading=!1}),1e3)}},reset(){this.form={age:"",name:""},this.getUserList()},addUserInfo(){this.dialogVisible=!0,this.title="添加用户信息",this.visibleType="add"},updateUserList(e){this.dialogVisible=e,this.getUserList()},updatData(e){this.dialogVisible=!0,this.title="修改用户信息",this.updataInfoVisible=e,this.visibleType="update"},delUserInfo({id:e}){this.$alert("是否删除这条用户信息","用户信息",{confirmButtonText:"确定",callback:t=>{"confirm"==t&&this.confirmDel(e)}})},async confirmDel(e){let t={id:e};await(0,i.qJ)(t);try{this.$message.success("删除数据成功"),this.getUserList()}catch(a){throw new Error("No Data")}},handleSizeChange(){},handleCurrentChange(){}}},n=(0,r.Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"requestText"},[a("div",{staticClass:"container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screee_ipt"},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),a("div",{staticClass:"screen_btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getUserList}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addUserInfo}},[e._v("添加")]),a("el-link",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")])],1)]),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"50vw"},attrs:{data:e.userList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"age",label:"年龄",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-link",{staticClass:"mr30",attrs:{type:"primary"},on:{click:function(t){return e.updatData(i)}}},[e._v("更新")]),a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.delUserInfo(i)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:40},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("BasePopUp",{attrs:{dialogVisible:e.dialogVisible,title:e.title,updataInfoVisible:e.updataInfoVisible,visibleType:e.visibleType},on:{"update:visible":e.updateUserList}})],1)}),[],!1,null,"0c36b50e",null).exports}}]);