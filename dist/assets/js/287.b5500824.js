"use strict";(self.webpackChunkvue_test=self.webpackChunkvue_test||[]).push([[287],{3287:function(t,i,s){s.r(i),s.d(i,{default:function(){return h}});s(57658);var i={name:"VirtualList",props:{listData:{type:Array,default:()=>[]},estimatedItemSize:{type:Number,required:!0},bufferScale:{type:Number,default:1},height:{type:String,default:"100%"}},computed:{_listData(){return this.listData.map((t,i)=>({_index:"_"+i,item:t}))},visibleCount(){return Math.ceil(this.screenHeight/this.estimatedItemSize)},aboveCount(){return Math.min(this.start,this.bufferScale*this.visibleCount)},belowCount(){return Math.min(this.listData.length-this.end,this.bufferScale*this.visibleCount)},visibleData(){var t=this.start-this.aboveCount,i=this.end+this.belowCount;return this._listData.slice(t,i)}},created(){this.initPositions(),window.vm=this},mounted(){this.screenHeight=this.$el.clientHeight,this.start=0,this.end=this.start+this.visibleCount},updated(){this.$nextTick(function(){var t;this.$refs.items&&this.$refs.items.length&&(this.updateItemsSize(),t=this.positions[this.positions.length-1].bottom,this.$refs.phantom.style.height=t+"px",this.setStartOffset())})},data(){return{screenHeight:0,start:0,end:0}},methods:{initPositions(){this.positions=this.listData.map((t,i)=>({index:i,height:this.estimatedItemSize,top:i*this.estimatedItemSize,bottom:(i+1)*this.estimatedItemSize}))},getStartIndex(t=0){return this.binarySearch(this.positions,t)},binarySearch(t,i){let s=0,e=t.length-1,n=null;for(;s<=e;){var o=parseInt((s+e)/2),a=t[o].bottom;if(a===i)return o+1;a<i?s=o+1:i<a&&((null===n||n>o)&&(n=o),e-=1)}return n},updateItemsSize(){this.$refs.items.forEach(i=>{var t=i.getBoundingClientRect().height,i=+i.id.slice(1),s=this.positions[i].height-t;if(s){this.positions[i].bottom=this.positions[i].bottom-s,this.positions[i].height=t;for(let t=1+i;t<this.positions.length;t++)this.positions[t].top=this.positions[t-1].bottom,this.positions[t].bottom=this.positions[t].bottom-s}})},setStartOffset(){let t;var i;t=1<=this.start?(i=this.positions[this.start].top-(this.positions[this.start-this.aboveCount]?this.positions[this.start-this.aboveCount].top:0),this.positions[this.start-1].bottom-i):0,this.$refs.content.style.transform=`translate3d(0,${t}px,0)`},scrollEvent(){var t=this.$refs.list.scrollTop;this.start=this.getStartIndex(t),this.end=this.start+this.visibleCount,this.setStartOffset()}}},e=s(1001),i=(0,e.Z)(i,function(){var i=this,s=i._self._c;return s("div",{ref:"list",staticClass:"infinite-list-container",style:{height:i.height},on:{scroll:function(t){return i.scrollEvent(t)}}},[s("div",{ref:"phantom",staticClass:"infinite-list-phantom"}),s("div",{ref:"content",staticClass:"infinite-list"},i._l(i.visibleData,function(t){return s("div",{key:t._index,ref:"items",refInFor:!0,staticClass:"infinite-list-item",attrs:{id:t._index}},[i._t("default",null,{item:t.item})],2)}),0)])},[],!1,null,"493678ec",null).exports,n={props:{item:{type:Object,default:()=>{}}},mounted(){},updated(){},data(){return{}},methods:{}},n=(0,e.Z)(n,function(){var t=this,i=t._self._c;return i("p",[i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.item.id))]),t._v(t._s(t.item.value))])},[],!1,null,"377b363b",null).exports,o=s(85384),a=s.n(o);let r=[];for(let t=0;t<1e3;t++)r.push({id:t,value:a().lorem.sentences()});var h=(0,e.Z)({name:"app",data(){return{data:r}},components:{VirtualListComponents:i,VirtualListComponentsItem:n}},function(){var t=this,i=t._self._c;return i("VirtualListComponents",{attrs:{listData:t.data,estimatedItemSize:100},scopedSlots:t._u([{key:"default",fn:function(t){return[i("VirtualListComponentsItem",{attrs:{item:t.item}})]}}])})},[],!1,null,null,null).exports}}]);